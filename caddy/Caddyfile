(tinyauth_forwarder) {
    forward_auth tinyauth:3000 {
        uri /api/auth/caddy
        copy_headers Remote-User Remote-Name Remote-Email Remote-Groups
    }
}

http://{$MY_DOMAIN} {
    import tinyauth_forwarder
    reverse_proxy static-web-server:80
}

http://auth.{$MY_DOMAIN} {
    reverse_proxy tinyauth:3000
}

http://tasks.{$MY_DOMAIN} {
    import tinyauth_forwarder
    reverse_proxy vikunja:3456 {
        header_up X-User {http.request.header.Remote-User}
        header_up X-Username {http.request.header.Remote-User}
        header_up X-Email {http.request.header.Remote-Email}
        header_up X-Name {http.request.header.Remote-Name}
    }
}